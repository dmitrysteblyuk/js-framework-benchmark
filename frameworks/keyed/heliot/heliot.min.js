var y=Symbol("observers"),v=Symbol("effectOne");function h(n){for(let t of n)t()}function P(n){return t=>{let o=t,r=new Set,e=(...d)=>{if(d.length===0)return n(e),o;let i=d[0];o!==i&&(o=i,h(r))};return e[y]=r,e}}function O(n,t,o){let r,e;return[(c,s,p,l)=>{let b=p?s:o(s),u,[f,C]=t(),m=()=>f(u);if(n(()=>C(u)),y in c)u=()=>b(c()),c[y].add(m),n(()=>{c[y].delete(m)});else{let a=new Set,S=NaN;u=()=>{let R,x=r,U=e;r=a,e=m;try{R=c()}finally{r=x,e=U}(l||S!==(S=R))&&b(R)},n(()=>{for(let R of a)R[y].delete(m)})}u()},c=>{e&&(r.add(c),c[y].add(e))}]}function A(n,t,o,r,e){return(d,i)=>{let c=NaN,s=r(i),[p,l]=t(),b=new Set,u=[],f=()=>{c!==(c=s(u))&&h(b)},C=!1;for(let a=0;a<d.length;a++)e(d[a],S=>{u[a]=S,C&&p(f)},!0);n(()=>l(f)),C=!0,f();let m=()=>(o(m),c);return m[y]=b,m}}function g(){let n=null,t=()=>{if(n===null)throw new Error("Cannot use reactive statements out of scope.");return n},o=d=>{t().push(d)},r=d=>{let i=[],c=n,s=()=>h(i);try{return n=i,[s,d()]}catch(p){throw s(),p}finally{n=c}};return[o,r,d=>{let i;return o(()=>i?.()),(...c)=>{i?.();let[s,p]=r(()=>d(...c));return i=s,p}}]}var B=[n=>n(),()=>{}],I=()=>{let n=new Set,t=!1;return[e=>{n.add(e),!t&&(t=!0,queueMicrotask(()=>{h(n),n.clear(),t=!1}))},e=>{n.delete(e)}]},D=()=>{let n=new Set,t;return[e=>{n.add(e),!t&&(t=requestAnimationFrame(()=>{h(n),n.clear(),t=0}))},e=>{n.delete(e)&&!n.size&&(cancelAnimationFrame(t),t=0)}]};function w(n){let t=I();return[e=>{let d=t;t=e,n(()=>t=d)},()=>t]}var $=E();function E(){let[n,t,o]=g(),[r,e]=w(n),[d,i]=O(n,e,o),c=P(i),s=A(n,e,i,o,d),p=(...l)=>{if(l.length<2)return c(l[0]);let b=l.pop();return s(l,u=>b(...u))};return p[v]=d,p.onDispose=n,p.useScheduler=r,p.runInNewScope=t,p}function T(n,t,o,r){if(typeof n=="string"||typeof n=="number")return V(t,n,o,r);if(typeof n=="function"){let e;return t[v](n,d=>{e=T(d,t,o,r)}),[()=>e?.[0]()??r(),()=>e?.[1](),d=>e?.[2]?.(d)]}return n?.render(t,o,r)}function V(n,t,o,r){let e=o.ownerDocument.createTextNode(F(t)),d=i=>(e.textContent=F(i),!0);return n.onDispose(()=>e.remove()),[()=>e,N(o,e,r),d]}function N(n,t,o){let r=e=>{let d=e===null?n.firstChild:e.nextSibling;d===null?n.appendChild(t):n.insertBefore(t,d)};return r(o()),()=>{let e=o();e!==t.previousSibling&&r(e)}}function F(n){return typeof n=="string"?n:n+""}function G(n,t,o){return{render:(e,d,i)=>{let{ownerDocument:c}=d,s=c.createElement(n),p=()=>null;e.onDispose(()=>s.remove());for(let l of o){let b=T(l,e,s,p);b&&(p=b[0])}for(let l in t)W(e,s,l,t[l]);return[()=>s,N(d,s,i)]}}}function W(n,t,o,r){switch(o){case"styles":for(let e in r)k(n,r[e],d=>{t.style[e]=d});return;case"classes":for(let e in r)k(n,r[e],d=>{d?t.classList.add(e):t.classList.remove(e)});return;case"value":k(n,r,e=>{t.value=e}),typeof r=="function"&&(t.oninput=()=>{let{type:e,value:d}=t;r(e==="number"?+d:d)});return}if(/^on[A-Z]/.test(o)){t[o.toLowerCase()]=r;return}k(n,r,e=>{t.setAttribute(o,e)})}function k(n,t,o){typeof t=="function"?n[v](t,o,!0,!0):o(t)}var j=(n,t,...o)=>typeof n=="string"?G(n,t,o):{render:(...e)=>n(t??{},o).render(...e)};function Q(n,t,o){return{render:(e,d,i)=>{let c={},s=[],p=u=>{for(let f=u;f-- >0;){let{node:C}=s[f];if(C)return C[0]()}return i()};return e[v](n,u=>{let f={},C=[];for(let m of u){let a=C.length,S=t(m,a),R=c[S],x;R===void 0?x={item$:e(m),index$:e(a)}:(x=s[R],(x.moved=x.index$()!==a)&&x.index$(a),x.index$(a),x.item$(m)),f[S]=a,C.push(x)}for(let m in c)m in f||s[c[m]].dispose();c=f,s=C;for(let m in f){let a=C[f[m]];if(a.dispose){a.moved&&a.node?.[1]();continue}[a.dispose,a.node]=e.runInNewScope(()=>T(o(a.item$,a.index$,m),e,d,()=>p(a.index$())))}}),e.onDispose(()=>{for(let u of s)u.dispose()}),[()=>p(s.length),()=>{for(let u of s)u.node?.[1]()}]}}}function L(n,t){return{render:(r,e,d)=>{let i=d,c=[];for(let p of t){let l=T(p,r,e,i);l&&(i=l[0],c.push(l[1]))}return[i,()=>h(c)]}}}function H(n,t,{reactiveApi:o=$,afterNode:r=null}={}){let[e]=o.runInNewScope(()=>n.render(o,t,()=>r));return e}export{$,L as Fragment,D as createAnimationFrameSchduler,I as createMicroTaskScheduler,E as createReactiveAPI,Q as each,j as h,B as immediateExecutionScheduler,H as render};
